/*
Deployment script for Iventory

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "Iventory"
:setvar DefaultFilePrefix "Iventory"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL14.SQL2017\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL14.SQL2017\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'The following operation was generated from a refactoring log file 1b9f2289-ca18-410d-8247-21194311f23c';

PRINT N'Rename [dbo].[Company].[Id] to CompanyId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Company].[Id]', @newname = N'CompanyId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 3568e602-4f2d-4a02-8fe3-0e9438ac3cf3';

PRINT N'Rename [dbo].[Contract].[Id] to ContractId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Contract].[Id]', @newname = N'ContractId', @objtype = N'COLUMN';


GO
PRINT N'Rename refactoring operation with key cdf08909-20d0-41aa-9d89-4b4d016516dd is skipped, element [dbo].[DeviceType].[Id] (SqlSimpleColumn) will not be renamed to [TypeId]';


GO
PRINT N'The following operation was generated from a refactoring log file 7cb44dc6-99f3-45e9-aa2a-efe9b88aaa2c';

PRINT N'Rename [dbo].[Employee].[Id] to EmployeeId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Employee].[Id]', @newname = N'EmployeeId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file a7146fe1-9123-46e2-8377-4d22f291e66c';

PRINT N'Rename [dbo].[Office] to Offices';


GO
EXECUTE sp_rename @objname = N'[dbo].[Office]', @newname = N'Offices', @objtype = N'OBJECT';


GO
PRINT N'The following operation was generated from a refactoring log file e08727af-26bd-4f5c-b0c4-3cb3242b2e4b';

PRINT N'Rename [dbo].[Offices].[Id] to OfficeId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Offices].[Id]', @newname = N'OfficeId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file c2835cde-d714-402f-b490-0f14578b95e1';

PRINT N'Rename [dbo].[Supplier] to Suppliers';


GO
EXECUTE sp_rename @objname = N'[dbo].[Supplier]', @newname = N'Suppliers', @objtype = N'OBJECT';


GO
PRINT N'The following operation was generated from a refactoring log file 29cdea6b-513a-49a9-9073-4539cc3b1877';

PRINT N'Rename [dbo].[Suppliers].[Id] to SupplierId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Suppliers].[Id]', @newname = N'SupplierId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 01c54da0-01d2-49cc-918d-770ed6f03a26';

PRINT N'Rename [dbo].[Warehouse] to Warehouses';


GO
EXECUTE sp_rename @objname = N'[dbo].[Warehouse]', @newname = N'Warehouses', @objtype = N'OBJECT';


GO
PRINT N'The following operation was generated from a refactoring log file 15f5e599-ff57-4a26-a823-23c8d7037e32';

PRINT N'Rename [dbo].[Warehouses].[Id] to WarehouseId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Warehouses].[Id]', @newname = N'WarehouseId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 2c710c4e-2d19-42c2-aa5e-79c928a97329';

PRINT N'Rename [dbo].[Company] to Companies';


GO
EXECUTE sp_rename @objname = N'[dbo].[Company]', @newname = N'Companies', @objtype = N'OBJECT';


GO
PRINT N'The following operation was generated from a refactoring log file 21f4c859-c388-458f-82bd-09cea7aa6312';

PRINT N'Rename [dbo].[Contract] to Contracts';


GO
EXECUTE sp_rename @objname = N'[dbo].[Contract]', @newname = N'Contracts', @objtype = N'OBJECT';


GO
PRINT N'Rename refactoring operation with key f4d6180f-25a4-4f0d-ae87-f8bb201e658a is skipped, element [dbo].[DeviceType] (SqlTable) will not be renamed to [DeviceTypes]';


GO
PRINT N'The following operation was generated from a refactoring log file 839d29ee-36d0-4392-9572-7362630df81e';

PRINT N'Rename [dbo].[Employee] to Employees';


GO
EXECUTE sp_rename @objname = N'[dbo].[Employee]', @newname = N'Employees', @objtype = N'OBJECT';


GO
PRINT N'Creating [dbo].[DeviceTypes]...';


GO
CREATE TABLE [dbo].[DeviceTypes] (
    [TypeId] INT           IDENTITY (1, 1) NOT NULL,
    [Name]   VARCHAR (128) NULL,
    PRIMARY KEY CLUSTERED ([TypeId] ASC)
);


GO
-- Refactoring step to update target server with deployed transaction logs

IF OBJECT_ID(N'dbo.__RefactorLog') IS NULL
BEGIN
    CREATE TABLE [dbo].[__RefactorLog] (OperationKey UNIQUEIDENTIFIER NOT NULL PRIMARY KEY)
    EXEC sp_addextendedproperty N'microsoft_database_tools_support', N'refactoring log', N'schema', N'dbo', N'table', N'__RefactorLog'
END
GO
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '1b9f2289-ca18-410d-8247-21194311f23c')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('1b9f2289-ca18-410d-8247-21194311f23c')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '3568e602-4f2d-4a02-8fe3-0e9438ac3cf3')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('3568e602-4f2d-4a02-8fe3-0e9438ac3cf3')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'cdf08909-20d0-41aa-9d89-4b4d016516dd')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('cdf08909-20d0-41aa-9d89-4b4d016516dd')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '7cb44dc6-99f3-45e9-aa2a-efe9b88aaa2c')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('7cb44dc6-99f3-45e9-aa2a-efe9b88aaa2c')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'a7146fe1-9123-46e2-8377-4d22f291e66c')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('a7146fe1-9123-46e2-8377-4d22f291e66c')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'e08727af-26bd-4f5c-b0c4-3cb3242b2e4b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('e08727af-26bd-4f5c-b0c4-3cb3242b2e4b')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'c2835cde-d714-402f-b490-0f14578b95e1')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('c2835cde-d714-402f-b490-0f14578b95e1')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '29cdea6b-513a-49a9-9073-4539cc3b1877')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('29cdea6b-513a-49a9-9073-4539cc3b1877')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '01c54da0-01d2-49cc-918d-770ed6f03a26')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('01c54da0-01d2-49cc-918d-770ed6f03a26')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '15f5e599-ff57-4a26-a823-23c8d7037e32')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('15f5e599-ff57-4a26-a823-23c8d7037e32')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '2c710c4e-2d19-42c2-aa5e-79c928a97329')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('2c710c4e-2d19-42c2-aa5e-79c928a97329')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '21f4c859-c388-458f-82bd-09cea7aa6312')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('21f4c859-c388-458f-82bd-09cea7aa6312')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'f4d6180f-25a4-4f0d-ae87-f8bb201e658a')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('f4d6180f-25a4-4f0d-ae87-f8bb201e658a')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '839d29ee-36d0-4392-9572-7362630df81e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('839d29ee-36d0-4392-9572-7362630df81e')

GO

GO
PRINT N'Update complete.';


GO
